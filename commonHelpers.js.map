{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.js-form'),\n  galleryElem: document.querySelector('.gallery'),\n  loaderElem: document.querySelector('.loader'),\n  btnLoadMore:document.querySelector(\".btn\"),\n};\n","import axios from 'axios';\n\nexport async function fetchImg(query, currentPage) {\n  const API_KEY = '42320174-3e6043d2cde7399227b0118b6';\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from './refs';\n\nconst lightbox = new SimpleLightbox('.gallery a', {});\n\nexport function render(items) {\n  const markup = templateImages(items);\n  refs.galleryElem.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function templateImage(item) {\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n        <img class=\"gallery-link\" alt=\"\" src=\"${item.previewURL}\" />\n        </a>\n        <ul class=\"list-content\">\n          <li class=\"list-text\">\n            <p class=\"list-text-item\">Likes <span>${item.likes}</span></p>\n          </li>\n          <li class=\"list-text\">          \n            <p class=\"list-text-item\">Views <span>${item.views}</span></p>\n          </li>\n          <li class=\"list-text\">           \n            <p class=\"list-text-item\">Comments <span>${item.comments}</span></p>\n          </li>\n          <li class=\"list-text\">           \n            <p class=\"list-text-item\">Downloads <span>${item.downloads}</span></p>\n          </li>\n        </ul>\n        </li>`;\n}\n\nfunction templateImages(items) {\n  return items.map(templateImage).join('');\n}\n","import { refs } from './js/refs';\nimport { fetchImg } from './js/pixabay-api';\nimport { render } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nrefs.form.addEventListener('submit', formSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nlet userValue;\nlet page;\nlet maxPage;\n\nasync function formSubmit(event) {\n  event.preventDefault();\n\n  userValue = event.target.firstElementChild.value.trim();\n  page = 1;\n  loaderOn();\n  if (userValue === '') return;\n  try {\n    const elem = await fetchImg(userValue, page);\n    console.log(elem);\n    maxPage = Math.ceil(elem.totalHits / 15);\n    if (elem.hits.length === 0) {\n      showError();\n    }\n    refs.galleryElem.innerHTML = '';\n    render(elem.hits);\n  } catch {\n    showError();\n  }\n  loaderOff();\n  checkBtnVisibleStatus();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  if (userValue === '') return;\n  try {\n    loaderOn();\n    const elem = await fetchImg(userValue, page);\n    if (elem.hits.length === 0) {\n      showError();\n    }\n    render(elem.hits);\n    scrollPage();\n  } catch {\n    showError();\n  }\n  loaderOff();\n  checkBtnVisibleStatus();\n}\n\nfunction showLoadBtn() {\n  refs.btnLoadMore.classList.remove('is-hidden');\n}\nfunction hideLoadBtn() {\n  refs.btnLoadMore.classList.add('is-hidden');\n}\nfunction checkBtnVisibleStatus() {\n  console.log(page, maxPage);\n  if (page >= maxPage) {\n    hideLoadBtn();\n    iziToast.info({\n      title: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      maxWidth: '600px',\n    });\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction loaderOn() {\n  refs.loaderElem.classList.remove('is-hidden');\n}\n\nfunction loaderOff() {\n  refs.loaderElem.classList.add('is-hidden');\n}\n\nfunction showError() {\n  iziToast.error({\n    title: `Sorry, there are no images matching your search query. Please try again!`,\n    position: 'topRight',\n    maxWidth: '600px',\n  });\n}\n\nfunction scrollPage() {\n  const height =\n    refs.galleryElem.firstElementChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["refs","fetchImg","query","currentPage","API_KEY","url","params","axios","lightbox","SimpleLightbox","render","items","markup","templateImages","templateImage","item","formSubmit","onLoadMoreClick","userValue","page","maxPage","event","loaderOn","elem","showError","loaderOff","checkBtnVisibleStatus","scrollPage","showLoadBtn","hideLoadBtn","iziToast","height"],"mappings":"owBAAO,MAAMA,EAAO,CAClB,KAAM,SAAS,cAAc,UAAU,EACvC,YAAa,SAAS,cAAc,UAAU,EAC9C,WAAY,SAAS,cAAc,SAAS,EAC5C,YAAY,SAAS,cAAc,MAAM,CAC3C,ECHO,eAAeC,EAASC,EAAOC,EAAa,CACjD,MAAMC,EAAU,qCAGVC,EAAM,2BACNC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACV,EAGE,OADY,MAAMI,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCfA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EAE7C,SAASC,EAAOC,EAAO,CAC5B,MAAMC,EAASC,EAAeF,CAAK,EACnCX,EAAK,YAAY,mBAAmB,YAAaY,CAAM,EACvDJ,EAAS,QAAO,CAClB,CAEO,SAASM,EAAcC,EAAM,CAClC,MAAO;AAAA,kCACyBA,EAAK,aAAa;AAAA,gDACJA,EAAK,UAAU;AAAA;AAAA;AAAA;AAAA,oDAIXA,EAAK,KAAK;AAAA;AAAA;AAAA,oDAGVA,EAAK,KAAK;AAAA;AAAA;AAAA,uDAGPA,EAAK,QAAQ;AAAA;AAAA;AAAA,wDAGZA,EAAK,SAAS;AAAA;AAAA;AAAA,cAItE,CAEA,SAASF,EAAeF,EAAO,CAC7B,OAAOA,EAAM,IAAIG,CAAa,EAAE,KAAK,EAAE,CACzC,CC9BAd,EAAK,KAAK,iBAAiB,SAAUgB,CAAU,EAC/ChB,EAAK,YAAY,iBAAiB,QAASiB,CAAe,EAE1D,IAAIC,EACAC,EACAC,EAEJ,eAAeJ,EAAWK,EAAO,CAM/B,GALAA,EAAM,eAAc,EAEpBH,EAAYG,EAAM,OAAO,kBAAkB,MAAM,KAAI,EACrDF,EAAO,EACPG,IACIJ,IAAc,GAClB,IAAI,CACF,MAAMK,EAAO,MAAMtB,EAASiB,EAAWC,CAAI,EAC3C,QAAQ,IAAII,CAAI,EAChBH,EAAU,KAAK,KAAKG,EAAK,UAAY,EAAE,EACnCA,EAAK,KAAK,SAAW,GACvBC,IAEFxB,EAAK,YAAY,UAAY,GAC7BU,EAAOa,EAAK,IAAI,CACpB,MAAU,CACNC,GACD,CACDC,IACAC,IACF,CAEA,eAAeT,GAAkB,CAE/B,GADAE,GAAQ,EACJD,IAAc,GAClB,IAAI,CACFI,IACA,MAAMC,EAAO,MAAMtB,EAASiB,EAAWC,CAAI,EACvCI,EAAK,KAAK,SAAW,GACvBC,IAEFd,EAAOa,EAAK,IAAI,EAChBI,GACJ,MAAU,CACNH,GACD,CACDC,IACAC,IACF,CAEA,SAASE,GAAc,CACrB5B,EAAK,YAAY,UAAU,OAAO,WAAW,CAC/C,CACA,SAAS6B,GAAc,CACrB7B,EAAK,YAAY,UAAU,IAAI,WAAW,CAC5C,CACA,SAAS0B,GAAwB,CAC/B,QAAQ,IAAIP,EAAMC,CAAO,EACrBD,GAAQC,GACVS,IACAC,EAAS,KAAK,CACZ,MAAO,6DACP,SAAU,WACV,SAAU,OAChB,CAAK,GAEDF,GAEJ,CAEA,SAASN,GAAW,CAClBtB,EAAK,WAAW,UAAU,OAAO,WAAW,CAC9C,CAEA,SAASyB,GAAY,CACnBzB,EAAK,WAAW,UAAU,IAAI,WAAW,CAC3C,CAEA,SAASwB,GAAY,CACnBM,EAAS,MAAM,CACb,MAAO,2EACP,SAAU,WACV,SAAU,OACd,CAAG,CACH,CAEA,SAASH,GAAa,CACpB,MAAMI,EACJ/B,EAAK,YAAY,kBAAkB,sBAAqB,EAAG,OAC7D,SAAS,CACP,IAAK+B,EAAS,EACd,SAAU,QACd,CAAG,CACH"}